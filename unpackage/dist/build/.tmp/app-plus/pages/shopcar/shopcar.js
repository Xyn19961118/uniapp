(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopcar/shopcar"],{"0f8b":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},n=[];s.d(e,"a",function(){return o}),s.d(e,"b",function(){return n})},"2f8f":function(t,e,s){},"513e":function(t,e,s){"use strict";(function(t){s("3e9c"),s("921b");o(s("66fd"));var e=o(s("c6e1"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("6e42")["createPage"])},"5a9e":function(t,e,s){"use strict";var o=s("2f8f"),n=s.n(o);n.a},bedf:function(t,e,s){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s("e1a2"),i=s("2355"),r=s("5c24"),a=new n.OrderModel,c=new i.UserModel,u=new r.ShopModel,l=function(){return s.e("components/shopcar/content").then(s.bind(null,"93d0"))},d=function(){return s.e("components/common/select").then(s.bind(null,"547a"))},h={components:{vContent:l,vSelect:d},data:function(){return{list:[],price:0,isAll:0,shopId:0,showReceive:!0,shopBounsList:null,thisShopName:"",bounsShopId:0}},onLoad:function(e){var s=this,n=e.id||0;this.shopId=n,a.list(n,function(e){console.log(t(e.error," at pages\\shopcar\\shopcar.vue:123")),10001==e.error?o.navigateTo({url:"/pages/user/login",animationType:"slide-in-right"}):(s.list=e,s._resSetCart())})},onShow:function(t){var e=this;a.list(t.id,function(t){e.list=t,e._resSetCart()})},methods:{getNumber:function(t){var e=t.num;this.saveNum(id,e),this._saveArr(id,t)},updateNum:function(t){var e=this,s=o.getStorageSync("cart");s instanceof Array&&(s.forEach(function(t){e.saveNum(t.id,t.num),a.cartUpdateNum(t.id,t.num)}),o.removeStorageSync("cart"))},_saveArr:function(t,e){var s=o.getStorageSync("cart"),n=-1;if(s){for(var i=0;i<s.length;i++){var r=s[i];r.id==t&&(r.num=e.num,n=i)}-1==n&&s.push(e),o.setStorageSync("cart",s)}else o.setStorageSync("cart",[e])},saveNum:function(t,e){var s=this.list,o=0;s.forEach(function(s){s.goodsList.forEach(function(s){s.rec_id==t&&(s.goods_number=e,s.total_price=s.goods_number*s.goods_price),s.is_select&&(o+=s.total_price)})}),this.list=s,this.price=o.toFixed(2)},selectAll:function(t){var e=t.currentTarget.dataset.status,s=e?0:1;a.selectedIsAll(s),this.list.forEach(function(t){t.goodsList.forEach(function(t){t.is_select=1==e?0:1})}),this._resSetCart()},changeStatus:function(e){console.log(t(e," at pages\\shopcar\\shopcar.vue:226"));var s=e;a.isSelect(s),this.list.forEach(function(t){t.goodsList.forEach(function(t){t.rec_id==s&&(1==t.is_select?t.is_select=0:t.is_select=1)})}),this._resSetCart()},delGoods:function(t){var e=this,s=t;a.isSelect(s),this.list.forEach(function(t,o){1==t.goodsList.length&&e.list.splice(o,1),t.goodsList.forEach(function(e,o){e.rec_id==s&&(t.goodsList.splice(o,1),a.delGoods(s))})}),0==this.list.length&&(this.total=!1),this._resSetCart()},_checkAll:function(t){var e=0,s=0,o=0,n=-1;t.forEach(function(t){t.goodsList.forEach(function(t,i){t.is_select&&(o+=t.goods_number*t.goods_price,s++,n=i),e++})});var i=e==s?1:0;return{isAll:i,price:o.toFixed(2),index:n}},_resSetCart:function(){var t=this._checkAll(this.list);this.isAll=t.isAll,this.price=t.price,this.list=this.list},checkHaveAddr:function(){var t=this,e=this._checkAll(this.list);if(-1==e.index)return o.showToast({title:"没有选中商品，不能结算",icon:"none",duration:1500,mask:!1}),!1;c.addressList(function(e){if(0==e.length)o.showModal({content:"你还没有地址，请添加地址",success:function(t){t.confirm&&o.navigateTo({url:"/pages/user/addAddress"})}});else{var s=0;e.forEach(function(t){t.defaultAddr&&(s=t.address_id)}),o.navigateTo({url:"/pages/submitOrders/submitOrders?id="+s+"&shopid="+t.shopId})}})},showReceiveHandle:function(e){var s=this,n=(this.shopBounsList,this.bounsShopId),i=e.detail.id,r=e.detail.name;n!==i&&(o.showLoading({title:"加载数据中...",mask:!0}),u.getShopBonus(i,function(e){console.log(t(e," at pages\\shopcar\\shopcar.vue:351")),s.shopBounsList=e,s.bounsShopId=i,o.hideLoading()})),this.showReceive=!1,this.thisShopName=r},receiveBouns:function(t){var e=t.currentTarget.dataset.id,s=t.currentTarget.dataset.index,n=this.shopBounsList,i=this;o.showLoading({title:"领取中...",mask:!0}),u.receiveShopBouns(e,function(t){for(var e in n)s==e&&(n[e].ours=1);i.shopBounsList=n,o.hideLoading(),o.showToast({title:t.errmsg,icon:"none"})})}}};e.default=h}).call(this,s("0de9")["default"],s("6e42")["default"])},c6e1:function(t,e,s){"use strict";s.r(e);var o=s("0f8b"),n=s("f0a6");for(var i in n)"default"!==i&&function(t){s.d(e,t,function(){return n[t]})}(i);s("5a9e");var r=s("2877"),a=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,"08a735d8",null);e["default"]=a.exports},f0a6:function(t,e,s){"use strict";s.r(e);var o=s("bedf"),n=s.n(o);for(var i in o)"default"!==i&&function(t){s.d(e,t,function(){return o[t]})}(i);e["default"]=n.a}},[["513e","common/runtime","common/vendor"]]]);